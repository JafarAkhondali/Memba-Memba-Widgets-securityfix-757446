<!DOCTYPE html>
<html>
<head>
    <title>Asset Manager</title>
    <script>
        window.app = { DEBUG: true };
    </script>
    <link href="./styles/vendor/kendo/web/kendo.common.min.css" rel="stylesheet">
    <link href="./styles/vendor/kendo/web/kendo.default.min.css" rel="stylesheet">
    <link href="./styles/vendor/kendo/web/kendo.default.mobile.min.css" rel="stylesheet">
    <script src="./js/vendor/kendo/jquery.min.js"></script>
    <script src="./js/vendor/kendo/kendo.all.min.js"></script>
    <!-- Asset Manager requirements -->
    <link href="./styles/kidoju.widgets.assetmanager.css" rel="stylesheet">
    <script src="./js/window.assert.js"></script>
    <script src="./js/window.log.js"></script>
    <script src="./js/kidoju.widgets.assetmanager.js"></script>
</head>
<body>
<h1>Asset Manager</h1>
<div id="assets"></div>
<div data-bind="text: url" ></div>
<script>
    ;(function(window, $, undefined){

        'use strict';

        var kendo = window.kendo,
            viewModel = kendo.observable({
                url: undefined
            });

        $(document).ready(function(){
            $('#assets').kendoAssetManager({
                change: function(e) {
                    viewModel.set('url', e.sender.value());
                },
                upload: function(e) {
                    if (e.files instanceof window.FileList && e.files.length) {
                        alert('Upload ' + e.files[0].name);
                    }
                },
                delete: function(e) {
                    alert('Delete ' + e.sender.value());
                },
                transport: {
                    read: function(options) {
                        options.success({
                            total: 1,
                            data: [
                                { "url": "https://s3-eu-west-1.amazonaws.com/kidoju.test/s/en/55c9c75dcc8974a01a397472/item204.jpg", "size": 3177 }
                            ]
                        });
                    },
                    create: function(options) {

                    },
                    destroy: function(options) {

                    }
                    // update is same as create
                },
                collections: [
                    {
                        name: 'O-Collection',
                        transport: {
                            read: function (options) {
                                options.success({
                                    total: 1,
                                    data: [
                                        { "url": "https://d2rvsmwqptocm.cloudfront.net/images/o_collection/svg/office/add.svg", "size": 580 },
                                        { "url": "https://d2rvsmwqptocm.cloudfront.net/images/o_collection/svg/office/airship.svg", "size": 779 },
                                        { "url": "https://d2rvsmwqptocm.cloudfront.net/images/o_collection/svg/office/apple.svg", "size": 842 },
                                        { "url": "https://d2rvsmwqptocm.cloudfront.net/images/o_collection/svg/office/atom.svg", "size": 1090 },
                                        { "url": "https://d2rvsmwqptocm.cloudfront.net/images/o_collection/svg/office/baseball.svg", "size": 1930 },
                                        { "url": "https://d2rvsmwqptocm.cloudfront.net/images/o_collection/svg/office/typewriter.svg", "size": 895 },
                                        { "url": "https://d2rvsmwqptocm.cloudfront.net/images/o_collection/svg/office/user.svg", "size": 591 }
                                    ]
                                });
                            }
                        }
                    },
                    {
                        name: 'V-Collection',
                        collections: [
                            {
                                name: 'Dark Grey',
                                transport: {
                                    read: 'http://localhost:63342/Kidoju.Widgets/test/data/o_collection_dark_grey.json'
                                }
                            },
                            {
                                name: 'Office',
                                transport: {
                                    read: 'http://localhost:63342/Kidoju.Widgets/test/data/o_collection_office.json'
                                }
                            },
                            {
                                name: 'White',
                                transport: {
                                    read: 'http://localhost:63342/Kidoju.Widgets/test/data/o_collection_white.json'
                                }
                            }
                        ]
                    }
                ]
            });
            kendo.bind('body', viewModel);
        });


    }(this, jQuery));
</script>
</body>
</html>
