<!DOCTYPE html>
<html>
<head>
    <title>Property Grid</title>
    <!--link href="//cdn.kendostatic.com/2014.3.1316/styles/kendo.common.min.css" rel="stylesheet">
    <link href="//cdn.kendostatic.com/2014.3.1316/styles/kendo.default.min.css" rel="stylesheet"-->
    <link href="./styles/vendor/kendo.common.min.css" rel="stylesheet">
    <link href="./styles/vendor/kendo.default.min.css" rel="stylesheet">
    <!--script src="//code.jquery.com/jquery-1.9.1.min.js"></script-->
    <script src="./js/vendor/jquery.min.js"></script>
    <!--script src="//cdn.kendostatic.com/2014.3.1316/js/kendo.all.min.js"></script-->
    <script src="./js/vendor/kendo.all.min.js"></script>
    <!--script src="../temp/2014.3.1316/src/src/kendo.core.js"></script>
    <script src="../temp/2014.3.1316/src/src/kendo.data.js"></script>
    <script src="../temp/2014.3.1316/src/src/kendo.binder.js"></script-->
    <!-- Rating requirements -->
    <!--link href="./styles/memba.widgets.rating.css" rel="stylesheet" />
    <script src="./js/memba.widgets.rating.js"></script-->
    <!-- Property Grid requirements -->
    <!--link href="./styles/memba.widgets.propertygrid.css" rel="stylesheet"-->
    <script src="./js/kidoju.widgets.propertygrid.js"></script>
</head>
<body>
<h1>Property Grid</h1>
<p>TODO: Implement a style selector (combo box with kendo styles that loads corresponding styles). We also want controls to change sizes, make grids readonly, ...</p>
<h2>Preferred configuration</h2>
<h3>Property grid bound to an object with schema and with row metadata</h3>
<div id="grid1"></div>
<h2>Other configurations</h2>
<h3>Property grid bound to nothing (should gracefully fallback)</h3>
<div id="grid2"></div>
<h3>Read-only property grid</h3>
<div id="grid3"></div>
<h3>Property grid bound to an object without schema and without row metadata (best guesses based on value types)</h3>
<div id="grid4"></div>
<h3>Property grid bound to an object with schema but without row metadata (property names used has titles)</h3>
<div id="grid5"></div>
<h3>Property grid bound to an object with row metadata but without schema (best guesses based on value types)</h3>
<div id="grid6"></div>

<script>
    var Properties = kendo.data.Model.define({
            id: 'docId', // the identifier of the model
            fields: {
                'docId': {
                    type: 'string',
                    nullable: false,
                    editable: false,
                    defaultValue: '00000000-0000-0000-0000-000000000000'
                },
                'title': {
                    type: 'string',
                    nullable: true
                },
                'description': {
                    type: 'string',
                    nullable: true
                },
                'category': {  //CMS Taxonomy
                    type: 'string',
                    nullable: true
                },
                'tags': {
                    type: 'string',
                    nullable: true
                },
                'language': {
                    type: 'string',
                    nullable: true
                },
                'author': {
                    type: 'string',
                    //nullable: false,
                    editable: false
                },
                'width': {
                    type: 'number',
                    defaultValue: 500
                },
                'height': {
                    type: 'number',
                    defaultValue: 300
                },
                'background': {
                    type: 'string' //URL?
                },
                'colour': {
                    type: 'string',
                    defaultValue: '#FF0000'
                },
                'publicationDate': {
                    type: 'date',
                    nullable: false
                },
                'rating': {
                    type: 'number',
                    defaultValue: 0
                },
                'views': {
                    type: 'number',
                    nullable: false,
                    editable: false
                }
            }
        }),
        viewModel = new Properties(),
        rows = [
            //See the columns property of a kendoGrid
            //See http://docs.kendoui.com/getting-started/framework/globalization/numberformatting
            //See http://docs.kendoui.com/getting-started/framework/globalization/dateformatting
            //We have also introduced controls:
            //- url
            //- textarea
            //- list
            //- rating
            {field: 'title', title: 'Title'},
            {field: 'description', title: 'Description', editor: 'textarea'},
            {field: 'category', title: 'Category', editor: 'categoryDropDownEditor'},
            {field: 'tags', title: 'Tags'}, //TODO: multiselect
            {field: 'language', title: 'Language'},
            {field: 'author', title: 'Author'},
            {field: 'width', title: 'Width'},
            {field: 'height', title: 'Height', editor: 'slider'},
            {field: 'background', title: 'Background', editor: 'url'},
            {field: 'colour', title: 'Colour', editor: 'colorpicker'},
            {field: 'publicationDate', title: 'Creation Date', editor:'datepicker', format: 'dd MMM yyyy'}, //TODO: format
            //{field: 'rating', title: 'Rating', editor: 'rating'},
            {field: 'rating', title: 'Rating'},
            {field: 'views', title: 'Views', format: 'n0'}
        ];

    $(document).ready(function(){
        $('#grid1').kendoPropertyGrid({
            properties: viewModel,
            rows: rows,
            schema: {model: Properties}
        });
        //Property grid bound to nothing (should gracefully fallback)
        $('#grid2').kendoPropertyGrid();
        //Read-only property grid
        $('#grid3').kendoPropertyGrid({
            properties: viewModel,
            rows: rows,
            schema: {model: Properties},
            readonly: true
        });
        //Property grid bound to an object without schema and without row metadata (best guesses based on value types)
        //$('#grid4').kendoPropertyGrid({
        //    properties: viewModel
        //});
        //Property grid bound to an object with schema but without row metadata (property names used has titles)
        //$('#grid5').kendoPropertyGrid({
        //    properties: viewModel,
        //    schema: {model: Properties}
        //});
        //Property grid bound to an object with row metadata but without schema (best guesses based on value types)
        //$('#grid6').kendoPropertyGrid({
        //    properties: viewModel,
        //    rows: rows
        //});
    });

    //This function is taken from http://demos.kendoui.com/web/grid/editing-custom.html
    function categoryDropDownEditor(container, options) {
        $('<input required data-text-field="CategoryName" data-value-field="CategoryID" data-bind="value:' + options.field + '"/>')
                .appendTo(container)
                .kendoDropDownList({
                    autoBind: false,
                    dataSource: {
                        type: "odata",
                        transport: {
                            read: "http://demos.kendoui.com/service/Northwind.svc/Categories"
                        }
                    }
                });
    }

</script>
</body>
</html>
