<!DOCTYPE html>
<html>
<head>
    <title>kidoju.widgets.page</title>
    <link rel="stylesheet" href="styles/2013.3.1424/kendo.common.min.css">
    <link rel="stylesheet" href="styles/2013.3.1424/kendo.default.min.css">
    <link rel="stylesheet" href="styles/kidoju.widgets.page.css">
    <link rel="stylesheet" href="styles/kidoju.widgets.toolbox.css">
    <script src="js/2013.3.1424/jquery.min.js"></script>
    <script src="js/2013.3.1424/kendo.all.min.js"></script>
    <script src="js/vendor/jquery.transit.js"></script>
    <script src="js/kidoju.models.js"></script>
    <script src="js/kidoju.tools.js"></script>
    <script src="js/kidoju.widgets.toolbox.js"></script>
    <!--script src="js/kifoju.widgets.navigation.js"></script-->
    <script src="js/kidoju.widgets.page.js"></script>
    <style>
        body {background-color:darkgrey;}
    </style>
</head>
<body>
<div>
    <input id="slider" value="100" />
    <input id="design" type="radio" name="mode" value="design" checked=true /><label for="design">design</label>
    <input id="solution" type="radio" name="mode" value="solution" /><label for="solution">solution</label>
    <input id="learn" type="radio" name="mode" value="test" /><label for="learn">learn</label>
    <input id="test" type="radio" name="mode" value="test" /><label for="test">test</label>
</div>
<div id="toolbox"></div>
<div id="page"></div>
<div id="grid"></div>
</body>
<script>
    $(document).ready(function() {
        var dataSource = new kendo.data.DataSource({
            data: [
                { id: 'be1935d0-ff0e-4818-a5a8-762127f3b506', tool : 'image', top: 50, left: 100, height: 250, width: 250, rotate: 45, properties: '{ "src": "http://marketingland.com/wp-content/ml-loads/2013/04/google-g-logo-2012.png" }' },
                { id: '75cecd51-dff0-4633-a421-dcdb5220fed5', tool : 'image', top: 300, left: 300, height: 250, width: 250, rotate: 315, properties: '{ "src": "http://4.bp.blogspot.com/_cPxcXn8pqkM/TCoCrLc7mVI/AAAAAAAABF0/8d6paccQU8A/s320/228_facebook.jpg" }' },
                { id: 'f2b4179e-3189-401b-bb17-65ceaf62b1eb', tool : 'label', top: 250, left: 500, height: 100, width: 300, rotate: 90, properties: '{ "font": "Georgia, serif", "color": "#FF0000", "text": "World" }' },
                { id: 'c3d46312-07c3-44dc-a1c9-987654949927', tool : 'textbox', top: 20, left: 20, height: 100, width: 300, rotate: 0, properties: '' }
            ],
            schema: {
                model: kidoju.PageItem
            }
        });

        var viewModel = kendo.observable({
            id: '93926F23-0D0D-4EA5-891D-DDADF995704C',
            items: dataSource
        });

        var page = $('#page').kendoPage({
            dataSource: viewModel.items
        }).data('kendoPage');

        $('#grid').kendoGrid({
            dataSource: viewModel.items,
            height: 300,
            selectable: true,
            editable: true,
            columns: [
                {
                    field: "id",
                    title: "Id",
                    width: 320
                },
                {
                    field: "tool",
                    title: "Tool",
                    width: 100
                },
                {
                    field: "top",
                    title: "Top",
                    width: 60
                },
                {
                    field: "left",
                    title: "Left",
                    width: 60
                },
                {
                    field: "height",
                    title: "Hei.",
                    width: 60
                },
                {
                    field: "width",
                    title: "Wid.",
                    width: 60
                },
                {
                    field: "rotate",
                    title: "Rot.",
                    width: 60
                },
                {
                    field: "properties",
                    title: "Properties"
                },
                {
                    command: "destroy",
                    title: "&nbsp;",
                    width: 120
                }
            ]
        });

        $('#slider').kendoSlider({
            increaseButtonTitle: 'Zoom in',
            decreaseButtonTitle: 'Zoom out',
            min: 0,
            max: 100,
            smallStep: 1,
            largeStep: 10,
            change: function(e) {
                page.scale(e.value/100);
            }
        });

        $('#toolbox').kendoToolbox();

        $('input[name=mode]').on('change', function(e) {
            switch(e.currentTarget.value) {
                case "design":
                    page.mode(kendo.ui.Page.fn.modes.design);
                    break;
                case "solution":
                    page.mode(kendo.ui.Page.fn.modes.solution);
                    break;
                case "learn":
                    page.mode(kendo.ui.Page.fn.modes.learn);
                    break;
                case "test":
                    page.mode(kendo.ui.Page.fn.modes.test);
                    break;
            }
        });

    });
</script>
</html>