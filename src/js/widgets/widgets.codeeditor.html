<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>widgets.codeeditor</title>
    <script>
        window.DEBUG = true;
    </script>
    <!-- Kidoju fonts -->
    <link href="../../styles/fonts/kidoju.css" rel="stylesheet">
    <!-- CodeMirror -->
    <link href="../../styles/vendor/codemirror/lib/codemirror.css" rel="stylesheet">
    <link href="../../styles/vendor/codemirror/theme/monokai.css" rel="stylesheet">
    <!-- HighlightJS -->
    <link href="../../styles/vendor/highlight/codepen-embed.css" rel="stylesheet">
    <!-- Kidoju theme -->
    <link href="../../styles/themes/app.theme.nordic.css" rel="stylesheet">
    <!-- SystemJS loader -->
    <script src="../../../test/vendor/polyfill.min.js"></script>
    <script src="../../../test/vendor/system.js"></script>
    <script src="../../js/helpers/system.config.js"></script>
    <script>
        (function () {
            'use strict';
            Promise.all([
                SystemJS.import('kendo.binder'),
                SystemJS.import('../data/data.pagecomponent.es6'),
                SystemJS.import('../helpers/helpers.data.es6'),
                SystemJS.import('../tools/tools.es6'),
                SystemJS.import('./widgets.codeeditor.es6')
            ]).then(function (modules) {
                var kendo = window.kendo;
                var PageComponent = modules[1].PageComponent;
                var component = modules[2].getTextBox();
                var library = modules[2].getValidationLibrary();
                var tools = modules[3].default;
                component.properties.solution = Math.trunc(100 * Math.random());
                component.properties.validation =
                    'function validate(value, solution, all) {\n\treturn parseInt(value, 10) === 5 + parseInt(solution, 10);\n}';
                tools.load(component.tool).then(() => {
                    var viewModel = kendo.observable({
                        component: new PageComponent(component),
                        library: new kendo.data.DataSource({ data: library }),
                        visible: true,
                        enabled: true
                    });
                    $(function(){
                        kendo.bind('body', viewModel);
                    });
                });
            });
        }());
    </script>
</head>
<body>
<h1>widgets.codeeditor</h1>
<h2>Bound to observable</h2>
<div data-role="codeeditor" data-bind="value: component, source: library, visible: visible, enabled: enabled"></div>
<div>
    <input type="checkbox" data-bind="checked: visible" />Visible&nbsp;
    <input type="checkbox" data-bind="checked: enabled" />enabled
</div>
<pre>
{
    visible: <span data-bind="text: visible"></span>
    enabled: <span data-bind="text: enabled"></span>
    code:
    <blockquote data-bind="text: component.properties.validation"></blockquote>
}
</pre>
<textarea data-bind="value: component.properties.validation" data-value-update="keyup" class="k-textbox" style="width: 100%; height: 15em;"></textarea>
</body>
</html>
