<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>widgets.imagelist</title>
    <script>
        window.DEBUG = true;
    </script>
    <!-- Memba fonts -->
    <link href="../../styles/fonts/memba.css" rel="stylesheet">
    <!-- Application theme -->
    <link href="../../styles/themes/app.theme.nordic.css" rel="stylesheet">
    <!-- SystemJS loader -->
    <script src="../../../test/vendor/polyfill.min.js"></script>
    <script src="../../../test/vendor/system.js"></script>
    <script src="../../js/helpers/system.config.js"></script>
    <script>
        (function () {
            'use strict';
            Promise.all([
                SystemJS.import('kendo.binder'),
                SystemJS.import('../helpers/helpers.grid.es6'),
                SystemJS.import('./widgets.imagelist.es6')
            ]).then(function () {
                var kendo = window.kendo;
                var viewModel = kendo.observable({
                    quiz: [
                        { text: 'question 1', url: 'http://i.telegraph.co.uk/multimedia/archive/03095/hybrid-animals-mac_3095333k.jpg' },
                        { text: 'question 2', url: 'http://i.telegraph.co.uk/multimedia/archive/03095/hybrid-animals-owl_3095337k.jpg' },
                        { text: 'question 3', url: 'http://i.telegraph.co.uk/multimedia/archive/03095/hybrid-animals-wha_3095332k.jpg' },
                        { text: 'question 4', url: 'http://i.telegraph.co.uk/multimedia/archive/03095/hybrid-animals-bir_3095339k.jpg' }
                    ],
                    visible: true,
                    enabled: true,
                    onClick: function (e) {
                        if (e.action === 'image') {
                            // Note: this is where we should plug our asset manager
                            var url = e.item.get('url');
                            var prompt = window.prompt("What's your image?", url);
                            if (prompt) {
                                // We need an input to get a validator, and we need to update it before the model otherwise validation fails an the model is not updated
                                // e.sender.element.find('input[type="hidden"][data-bind*="image"]').val(prompt);
                                e.item.set('url', prompt);
                            }
                        }
                    }
                });
                $(function() {
                    kendo.bind('body', viewModel);
                });
            });
        }());
    </script>
</head>
<body>
<h1>widgets.imagelist</h1>

<h2>Bound to observable</h2>
<div data-role="imagelist" data-bind="source:quiz, events:{ click: onClick }, visible: visible, enabled: enabled" data-require-images="true"></div>

<div>
    <input type="checkbox" data-bind="checked: visible">Visible
    <input type="checkbox" data-bind="checked: enabled">Enabled
</div>

<h2>Grid</h2>
<div id="grid" data-role="grid" data-bind="source:quiz"></div>

</body>
</html>
