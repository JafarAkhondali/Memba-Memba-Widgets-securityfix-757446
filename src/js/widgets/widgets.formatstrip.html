<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>widgets.formatstrip</title>
    <script>
        window.DEBUG = true;
    </script>
    <!-- Kidoju fonts -->
    <link href="../../styles/fonts/kidoju.css" rel="stylesheet">
    <!-- Kidoju theme -->
    <link href="../../styles/themes/app.theme.nordic.css" rel="stylesheet">
    <!-- SystemJS loader -->
    <script src="../../../test/vendor/polyfill.min.js"></script>
    <script src="../../../test/vendor/system.js"></script>
    <script src="../../js/helpers/system.config.js"></script>
    <script>
        (function () {
            'use strict';
            Promise.all([
                SystemJS.import('kendo.binder'),
                SystemJS.import('../data/data.pagecomponent.es6'),
                SystemJS.import('./widgets.formatstrip.es6'),
                SystemJS.import('../helpers/helpers.data.es6')
            ]).then(function (modules) {
                var kendo = window.kendo;
                var PageComponentDataSource = modules[1].PageComponentDataSource;
                var data = modules[3].getComponentArray();
                var pageComponentDataSource = new PageComponentDataSource({ data });
                var viewModel = window.viewModel = kendo.observable({
                    components: pageComponentDataSource,
                    selectedComponent: null, // For the formatstrip
                    style: null, // For the formatbar
                    enabled: true,
                    visible: true,
                    reset: function(e) {
                        this.set('selectedComponent', null);
                    }
                });
                $(function() {
                    kendo.bind('body', viewModel);
                    pageComponentDataSource.fetch();
                    //    .then(function() {
                    //        viewModel.set('selectedComponent', pageComponentDataSource.at(0));
                    //    });
                });
            });
        }());
    </script>
    <style>
        body > div:first-of-type {
            height: 22px;
        }

        button {
            margin: 5px 0;
        }
    </style>
</head>
<body>
<h1>widgets.formatstrip</h1>
<div data-role="formatbar" data-bind="value: style, visible: visible, enabled: enabled"></div>
<div style="padding: 20px;">
    <input type="text" data-bind="value: style" class="k-textbox" style="width: 100%;">
    <div>
        <input type="checkbox" data-bind="checked: visible" />Visible&nbsp;
        <input type="checkbox" data-bind="checked: enabled" />Enabled
    </div>
</div>
<div style="padding: 20px;"><div data-bind="attr: { style: style }">Sample Text</div></div>
<h1>widgets.formatstrip</h1>
<button data-bind="click: reset">Clear Selection</button><br/>
<input data-role="dropdownlist" data-bind="source: components, value: selectedComponent" data-text-field="tool" data-value-field="id" style="width: 300px;"></select>
<div>&nbsp;</div>
<div id="formatstrip" data-role="formatstrip" data-bind="value: selectedComponent, visible: visible, enabled: enabled" style="width: 100%;" data-auto-bind="false"></div>
<div data-bind="text: selectedComponent.id"></div>
</body>
</html>
