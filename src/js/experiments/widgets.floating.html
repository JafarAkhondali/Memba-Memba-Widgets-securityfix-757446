<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>widgets.floating</title>
    <script>
        window.DEBUG = true;
    </script>
    <!-- Kidoju fonts -->
    <link href="../../styles/fonts/kidoju.css" rel="stylesheet">
    <!-- Kidoju theme -->
    <link href="../../styles/themes/app.theme.nordic.css" rel="stylesheet">
    <!-- SystemJS loader -->
    <script src="../../../test/vendor/polyfill.min.js"></script>
    <script src="../../../test/vendor/system.js"></script>
    <script src="../helpers/system.config.js"></script>
    <script>
        (function () {
            'use strict';
            Promise.all([
                SystemJS.import('kendo.toolbar'),
                SystemJS.import('./widgets.floating.es6'),
                SystemJS.import('kendo.mobile.application'),
                SystemJS.import('kendo.mobile.view'),
                SystemJS.import('kendo.mobile.navbar')
            ]).then(function () {
            	var kendo = window.kendo;
            	$(function() {
                    new kendo.mobile.Application(
                        document.body,
                        {
                            init() {
                                kendo.init('body');
                                // floating1 > toolbar 1
                                var toolbarElement1 = $('<div/>');
                                toolbarElement1.appendTo($('#floating1>.kj-floating-content'));
                                toolbarElement1.kendoToolBar({
                                    items: [
                                        { type: "button", text: "Foo1" },
                                        { type: "button", text: "Bar1" }
                                    ],
                                    resizable: false
                                });
                                // toolbarElement1.hide();

                                // floating1 > toolbar 2
                                var toolbarElement2 = $('<div/>');
                                toolbarElement2.appendTo($('#floating1>.kj-floating-content'));
                                toolbarElement2.kendoToolBar({
                                    items: [
                                        { type: "button", text: "Foo2" },
                                        { type: "button", text: "Bar2" }
                                    ],
                                    resizable: false
                                });
                                // toolbarElement2.hide();

                                $('input[type="checkbox"]').on('change', function (e) {
                                    var index = $('input[type="checkbox"]').index(e.currentTarget);
                                    var toolbar = $($('.kj-floating-content>.k-toolbar').get(index));
                                    toolbar.toggle(!toolbar.is(':visible'));
                                });
                            }
                        }
                    );
                });
            });
        }());
    </script>
</head>
<body>
<div data-role="view" data-title="widgets.floating">
    <div data-role="header">
        <div data-role="navbar">
            <span data-role="view-title"></span>
        </div>
        <div>
            <h1>widgets.floating</h1>
            <div>
                <input type="checkbox" checked />Toolbar 1,&nbsp;
                <input type="checkbox" checked />Toolbar 2
            </div>
            <!-- first one has toolbars with buttons and should show -->
            <div id="floating1" data-role="floating" data-observed=".k-toolbar:not([style*='display: none']) [data-uid]" data-attribute-filter="['style']"></div>
            <!-- second one has no toolbar and should be hidden -->
            <div id="floating2" data-role="floating" data-observed=".k-toolbar:not([style*='display: none']) [data-uid]" data-attribute-filter="['style']"></div>
        </div>
    </div>
</div>
</body>
</html>
