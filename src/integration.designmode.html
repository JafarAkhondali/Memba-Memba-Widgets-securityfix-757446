<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>integration.designmode</title>
    <!-- weinre - see http://people.apache.org/~pmuellr/weinre/docs/latest -->
    <!--script src="http://10.0.0.105:8080/target/target-script-min.js#anonymous"></script-->
    <script>
        window.DEBUG = true;
    </script>
    <!-- Kidoju fonts -->
    <link href="./styles/fonts/kidoju.css" rel="stylesheet">
    <!-- Kidoju theme -->
    <link href="./styles/themes/app.theme.nordic.css" rel="stylesheet">
    <!-- SystemJS loader -->
    <script src="../test/vendor/polyfill.min.js"></script>
    <script src="../test/vendor/system.js"></script>
    <script src="./js/helpers/system.config.js"></script>
    <style>
        html,
        body {
            margin: 0;
            width: 100%;
            height: 100%;
        }

        body {
            display: flex;
            flex-direction: column;
        }

        header {
            height: 48px;
            background-color: #011;
        }

        header > img {
            padding: 2px 5px;
        }

        footer {
            height: 35px;
        }

        footer > div {
            padding: 8px;
        }

        .no-scroll {
            overflow: initial;
        }

        main {
            flex: 1 1 auto;
            display: flex;
            flex-direction: column;
        }

        main > .k-toolbar {
            border-bottom: 0;
        }

        main > [data-role="splitter"] {
            flex: 1 1 auto;
            height: 100%;
        }

        .kj-navigation {
            border: 0;
        }

        #center-pane {
            display: flex;
            flex-direction: column;
            touch-action: none;
        }

        .wrapper {
            align-items: center;
            display: flex;
            flex: 1 1;
            justify-content: center;
        }

        .centered > .kj-stage {
            transform-origin: 0 0;
        }

        #console-panelbar {
            border-bottom: 0;
        }

        #right-pane .k-panelbar {
            border-top: 0;
        }
    </style>
    <script>
        (function () {
            'use strict';
            SystemJS.import('./integration.designmode.es6');
        }());
    </script>
</head>
<body>
    <header>
        <img src="./styles/images/KdjLogoBB.png" alt="Kidoju Logo">
    </header>
    <main>
        <div data-role="toolbar"></div>
        <div data-role="splitter" data-panes="[{min: 100, max:400, size: 300}, { scrollable: false }, {min: 100, max:600, size: 300}]">
            <div id="left-pane">
                <div data-role="navigation" data-bind="source: stream.pages, value: selectedPage"></div>
            </div>
            <div id="center-pane">
                <div data-role="formatstrip" data-bind="value: selectedComponent"></div>
                <div class="wrapper">
                    <div class="centered">
                        <div data-role="stage" data-bind="source: selectedPage.components, value: selectedComponent" data-mode="design"></div>
                    </div>
                </div>
                <div id="console-wrapper" style="width: 100%;">
                    <ul id="console-panelbar" data-role="panelbar">
                        <li><span class="k-link">Console</span>
                            <div style="padding: 10px; overflow-y: auto; max-height: 200px;">
                                <div id="refresh" style="text-align: right;"><a><span class="k-icon k-i-refresh">Refresh</span>Refresh</a></div>
                                <div id="console" class="k-content" data-role="listview" data-bind="source: console" data-template="console-template"></div>
                            </div>
                        </li>
                    </ul>
                </div>
                <script type="text/kendo-x-template" id="console-template">
                    # if (type === 'error') { #
                    <div class="k-widget k-notification k-notification-error" data-index="#: index #">
                        <div class="k-notification-wrap"><span class="k-icon k-i-error">Error</span>#:message#</div>
                    </div>
                    # } else if (type === 'warning') { #
                    <div class="k-widget k-notification k-notification-warning" data-index="#: index #">
                        <div class="k-notification-wrap"><span class="k-icon k-i-warning">Warning</span>#:message#</div>
                    </div>
                    # } else { #
                    <div class="k-widget k-notification k-notification-info" data-index="#: index #">
                        <div class="k-notification-wrap"><span class="k-icon k-i-info">Info</span>#:message#</div>
                    </div>
                    # } #
                </script>
            </div>
            <div id="right-pane">
                <div class="no-scroll">
                    <ul data-role="panelbar">
                        <li><span class="k-link">Toolbox</span>
                            <div class="k-content">
                                <div data-role="toolbox" data-icon-path="./styles/images/o_collection/svg/office/" style="width: 100%; border: none;"></div>
                            </div>
                        </li>
                        <li><span class="k-link">Explorer</span>
                            <div class="k-content">
                                <div data-role="explorer" data-icon-path="./styles/images/o_collection/svg/office/" data-bind="source: selectedPage.components, value: selectedComponent" style="width: 100%; border: none;"></div>
                            </div>
                        </li>
                        <li><span class="k-link">Display Attributes</span>
                            <div class="k-content">
                                <div id="attributes" data-role="propertygrid" data-bind="value: selectedComponent" data-messages="{ property: null, value: null }" style="width: 100%; border: none;"></div>
                            </div>
                        </li>
                        <li><span class="k-link">Test Logic</span>
                            <div class="k-content">
                                <div id="properties" data-role="propertygrid" data-bind="value: selectedComponent" data-messages="{ property: null, value: null }" style="width: 100%; border: none;"></div>
                            </div>
                        </li>
                        <li><span class="k-link">Instructions</span>
                            <div class="k-content">
                                <div data-role="markeditor" data-bind="value: selectedPage.instructions, enabled: selectedPage" style="width: 100%; border: none;"></div>
                            </div>
                        </li>
                        <li><span class="k-link">Explanations</span>
                            <div class="k-content">
                                <div data-role="markeditor" data-bind="value: selectedPage.explanations, enabled: selectedPage" style="width: 100%; border: none;"></div>
                            </div>
                        </li>
                        <li><span class="k-link">Settings</span>
                            <div class="k-content">
                                <div id="settings" data-role="propertygrid" data-bind="value: settings" data-messages="{ property: null, value: null }" style="width: 100%; border: none;"></div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <div>Copyright &copy; 2013-2019 Memba Sarl. All rights reserved.</div>
    </footer>
</body>
</html>
